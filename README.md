# AI Interviewer SaaS

## Table of Contents

1.  [Getting Started](#getting-started)
2.  [Repository Structure](#repository-structure)
3.  [Development Workflows](#development-workflows)
4.  [API Reference](#api-reference)
5.  [Running the Application](#running-the-application)

---

## üèÅ Getting Started

Follow these instructions to set up the project for local development.

### Prerequisites

*   Python 3.9+
*   Docker and Docker Compose
*   IDE VSCode

### Environment Setup

To run this application, you must configure the necessary environment variables.

1.  **Create an environment file**: Copy the example file to a new `.env` file in the `backend/` directory.
    ```sh
    cp backend/.env.example backend/.env
    ```
2.  **Configure variables**: Open `backend/.env` and populate the values for each variable. These will include:
    *   `DATABASE_URL`: The connection string for your PostgreSQL database.
    *   `SECRET_KEY`: A secret key for JWT and cryptographic signing.
    *   `ALGORITHM`: The algorithm for JWT encoding (e.g., `HS256`).
    *   API keys for any third-party AI services.

---

## üìÇ Repository Structure

The repository is organized to maintain a clean, scalable, and maintainable architecture. Below is a breakdown of the key files and directories within the `backend/` application.

| File/Folder | Description |
| :--- | :--- |
| **`Dockerfile`** | Contains instructions to build a Docker image for the backend application. |
| **`alembic.ini`** | Configuration file for Alembic, the database schema migration tool. |
| **`alembic/`** | Holds the versioned migration scripts generated by Alembic. |
| **`app/`** | The core directory containing all application source code. |
| `app/main.py` | The main entry point for the FastAPI application. Initializes the app, routers, and middleware. |
| `app/core/` | Holds the application's core logic, including configuration and database session management. |
| `app/middleware/` | Contains custom middleware for processing requests and responses (e.g., authentication, logging). |
| `app/models/` | Defines database tables as SQLAlchemy ORM models. |
| `app/routes/` | Contains the API endpoint definitions, organized by resource. |
| `app/schemas/` | Defines Pydantic models for data validation, serialization, and API request/response shapes. |
| `app/services/` | Houses the application's business logic, separating it from the API layer. |
| `app/utils/` | A collection of utility functions and helper classes used across the application. |
| **`tests/`** | Contains all automated tests (unit, integration) for the application. |
| **`.pre-commit-config.yaml`** | Configuration for pre-commit hooks to enforce code quality and style. |
| **`pytest.ini`** | Configuration file for `pytest`, the testing framework. |
| **`setup.py`** | Project setup script for managing dependencies and packaging. |

---

## üîÑ Development Workflows

### Code Quality & Testing

The project is configured to enforce high standards for code quality.

*   **Pre-Commit Hooks**: The `.pre-commit-config.yaml` file automates code formatting (`black`), linting (`ruff`), and import sorting (`isort`) before each commit.
*   **Automated Testing**: The `tests/` directory and `pytest.ini` configuration establish a robust testing strategy. All new features and bug fixes should be accompanied by corresponding tests to maintain reliability.

### Database Migrations

Database schema changes are managed with **Alembic**.

1.  After modifying a model in `app/models/`, generate a new migration script:
    ```sh
    alembic revision --autogenerate -m "Description of schema change"
    ```
2.  Apply the migration to update the database schema:
    ```sh
    alembic upgrade head
    ```

---

## üîå API Reference

The API provides a structured interface for interacting with the AI Interviewer platform. Access control is role-based.

### **Authentication**
*Public endpoints for user session management.*

| Method | Endpoint | Description | Access Control |
| :--- | :--- | :--- | :--- |
| `POST` | `/auth/login` | Authenticates a user and returns JWT access and refresh tokens. | Public |
| `POST` | `/auth/refresh` | Issues a new access token using a valid refresh token. | Public |
| `POST` | `/auth/logout` | Invalidates the user's session (implementation-dependent). | Authenticated |

### **Company**
*Endpoints for managing company accounts.*

| Method | Endpoint | Description | Access Control |
| :--- | :--- | :--- | :--- |
| `POST` | `/company` | Registers a new company account. | Public |
| `GET` | `/company/{id}` | Retrieves details for a specific company. | Authenticated |
| `PUT` | `/company/{id}` | Updates company information. | HR Only |

### **Users**
*Endpoints for user account management.*

| Method | Endpoint | Description | Access Control |
| :--- | :--- | :--- | :--- |
| `POST` | `/users` | Creates a new user within the company. | HR Only |
| `GET` | `/users` | Lists all users in the company. | Team Lead+ |
| `GET` | `/users/{id}` | Retrieves details for a specific user. | Authenticated |
| `PUT` | `/users/{id}` | Updates a user's profile information. | HR or Self |
| `DELETE` | `/users/{id}` | Deletes a user account. | HR Only |
| `POST` | `/users/{id}/change-password` | Allows an authenticated user to change their own password. | Authenticated |

### **Interviews**
*Core endpoints for managing the interview lifecycle.*

| Method | Endpoint | Description | Access Control |
| :--- | :--- | :--- | :--- |
| `POST` | `/interviews` | Creates and schedules a new interview session. | Employee+ |
| `GET` | `/interviews` | Lists all interviews accessible to the user. | Employee+ |
| `GET` | `/interviews/{id}` | Retrieves the details and status of a specific interview. | Employee+ |
| `PUT` | `/interviews/{id}` | Updates the details of a scheduled interview. | Creator Only |
| `POST` | `/interviews/{id}/cancel` | Cancels a scheduled interview. | HR or Creator |
| `POST` | `/interviews/{id}/start` | Marks an interview as started. | Participant+ |
| `POST` | `/interviews/{id}/complete` | Marks an interview as completed and triggers analysis. | Creator Only |

### **Scores & Logs**
*Endpoints for retrieving interview results and system logs.*

| Method | Endpoint | Description | Access Control |
| :--- | :--- | :--- | :--- |
| `POST` | `/scores` | Manually creates a score record (if applicable). | Employee+ |
| `GET` | `/scores/{interview_id}` | Retrieves the scores and analysis for a completed interview. | Employee+ |
| `PUT` | `/scores/{score_id}` | Updates an existing score record. | Creator Only |
| `GET` | `/logs` | Retrieves all
ÓÄÄ
